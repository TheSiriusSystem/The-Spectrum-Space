<section id="resources" class="section">
    <div class="container">
        <!-- Header -->
        <header class="mb-5 has-text-centered">
            <h1 class="title is-size-2-desktop is-size-3-mobile">
                <i class="fa-solid fa-lightbulb"></i> Resources
            </h1>
            <h2 class="subtitle is-size-4-desktop is-size-5-mobile ls-wide">
                Helpful Tools for Every Step of Your Journey.
            </h2>
        </header>

        <!-- Featured Resource -->
        <div class="card mb-6">
            <header class="card-header">
                <h3 class="card-header-title title is-size-3-desktop is-size-4-mobile is-centered">
                    Featured Resource
                </h3>
            </header>
            <div class="card-content">
                <div class="columns is-multiline is-vcentered">
                    <div class="column is-3">
                        <img src="{{ site.featured-resource-logo }}" alt="{{ site.featured-resource }} Logo">
                    </div>
                    <div class="column is-9">
                        <h4 class="title mb-4 is-size-5">
                            {{ site.featured-resource }}
                        </h4>
                        <p>
                            {{ site.featured-resource-description }}
                        </p>
                        <div class="buttons mt-3">
                            <a class="button" href="{{ site.featured-resource-url }}" target="_blank">
                                Visit Website
                            </a>

                            {% unless site.featured-resource-hotline-url == "" or site.featured-resource-hotline-url == nil %}
                                <a class="button is-outlined" href="{{ site.featured-resource-hotline-url }}">
                                    {{ site.featured-resource-hotline-text }}
                                </a>
                            {% endunless %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr class="mb-6">

        <!-- Resource Accordion -->
        <div>
            {% for resource in site.resources %}
                <article class="message mb-4">
                    <div class="message-header" style="background-color: {{ resource.header-color }};" onclick="toggleAccordion(this)">
                        <h3 style="color: {{ resource.header-font-color }};">
                            <i class="{{ resource.icon }} mr-2"></i> {{ resource.title }}
                        </h3>
                        <i class="fa-solid fa-chevron-down"></i>
                    </div>
                    <div class="message-body is-hidden">
                        <p>
                            {{ resource.description }}
                        </p>
                        <a class="button mt-2 is-small is-outlined" href="{{ resource.url }}">
                            View Resource
                        </a>
                    </div>
                </article>
            {% endfor %}
        </div>
    </div>
</section>

<script>
    function toggleAccordion(header)
    {
        const body = header.nextElementSibling;
        const chevron = header.querySelector(".fa-chevron-down");
        const isActive = !body.classList.contains("is-hidden");

        document.querySelectorAll(".message-body").forEach(function(item)
        {
            item.classList.add("is-hidden");
        });
        document.querySelectorAll(".fa-chevron-down").forEach(function(icon)
        {
            icon.classList.remove("fa-rotate-180");
        });

        if (isActive)
        {
            body.classList.add("is-hidden");
            chevron.classList.remove("fa-rotate-180");
        } else
        {
            body.classList.remove("is-hidden");
            chevron.classList.add("fa-rotate-180");
        }
    }
</script>