<section id="events" class="section">
    <div class="container">
        <!-- Header -->
        <header class="mb-5 has-text-centered">
            <h1 class="title is-size-2-desktop is-size-3-mobile">
                <i class="fa-solid fa-calendar-days"></i> Events
            </h1>
            <h2 class="subtitle is-size-4-desktop is-size-5-mobile ls-wide">
                Be Seen. Be Heard. Be There.
            </h2>
        </header>

        {% assign ongoing_events = site.data.events | where: "status", "ongoing" %}
        {% assign upcoming_events = site.data.events | where: "status", "upcoming" %}
        {% assign past_events = site.data.events | where: "status", "past" %}
        {% assign event_limit = 6 %}
        {% assign events_shown_on_desktop = 0 %}
        {% assign events_shown_on_mobile = 0 %}

        {% include event-group.html events=ongoing_events title="Ongoing Events" %}
        {% include event-group.html events=upcoming_events title="Upcoming Events" %}
        {% include event-group.html events=past_events title="Past Events" %}
    </div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function()
    {
        const eventItems = document.querySelectorAll("#events .event");
        const eventCards = document.querySelectorAll("#events .card");

        if (window.matchMedia("(prefers-reduced-motion: no-preference)").matches)
        {
            const delay = 250;

            const eventItemObserver = new IntersectionObserver(function(entries)
            {
                entries.forEach(function(entry, index)
                {
                    if (entry.isIntersecting)
                    {
                        setTimeout(function()
                        {
                            entry.target.classList.add("fade-in");
                            eventItemObserver.unobserve(entry.target);
                        }, index * delay);
                    }
                });
            }, {
                threshold: 0.15
            });
            const eventCardObserver = new IntersectionObserver(function(entries)
            {
                entries.forEach(function(entry, index)
                {
                    if (entry.isIntersecting)
                    {
                        setTimeout(function()
                        {
                            entry.target.classList.add("fade-in");
                            eventCardObserver.unobserve(entry.target);
                        }, index * delay);
                    }
                });
            }, {
                threshold: 0.15
            });

            eventItems.forEach(eventItem => eventItemObserver.observe(eventItem));
            eventCards.forEach(eventCard => eventCardObserver.observe(eventCard));
        } else
        {
            eventItems.forEach(function(eventItem)
            {
                eventItem.classList.add("fade-in");
            });
            eventCards.forEach(function(eventCard)
            {
                eventCard.classList.add("fade-in");
            });
        }
    });
</script>